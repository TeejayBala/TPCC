<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - My Dummy Shop</title>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y397YYB2H8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y397YYB2H8');
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MWC9P9T4');</script>
<!-- End Google Tag Manager -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    body {
      padding-top: 70px;
    }
    .product-img {
      width: 100px;
      height: 70px;
      object-fit: cover;
    }
  </style>
  <script src="https://cdn.pagesense.io/js/bzsj4n23/4a919d396135456c91960fad7e954dcb.js"></script>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="index.html"><i class="fas fa-store"></i> My Dummy Shop</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link" href="products.html"><i class="fas fa-box"></i> Products</a></li>
          <li class="nav-item"><a class="nav-link" href="cart.html"><i class="fas fa-shopping-cart"></i> Cart</a></li>
          <li class="nav-item"><a class="nav-link active" href="checkout.html"><i class="fas fa-credit-card"></i> Checkout</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html"><i class="fas fa-info-circle"></i> About</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
        </ul>
        <ul class="navbar-nav ms-auto">
          <li class="nav-item" id="nav-login"><a class="nav-link" href="login.html"><i class="fas fa-sign-in-alt"></i> Login</a></li>
          <li class="nav-item d-none" id="nav-logout"><a class="nav-link" href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Checkout Section -->
  <div class="container mt-5">
    <h2 class="mb-4">Checkout</h2>
    <div class="row">
      <div class="col-md-8">
        <h4 class="mb-3">Billing Information</h4>
        <form id="checkoutForm">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="fullname">Full Name</label>
              <input type="text" class="form-control" id="fullname" name="fullname" placeholder="John M. Doe" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="email">Email</label>
              <input type="email" class="form-control" id="email" name="email" placeholder="john@example.com" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="address">Address</label>
              <input type="text" class="form-control" id="address" name="address" placeholder="542 W. 15th Street" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="city">City</label>
              <input type="text" class="form-control" id="city" name="city" placeholder="New York" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="state">State</label>
              <input type="text" class="form-control" id="state" name="state" placeholder="NY" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="zip">Zip</label>
              <input type="text" class="form-control" id="zip" name="zip" placeholder="10001" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="phone">Phone</label>
              <input type="tel" class="form-control" id="phone" name="phone" placeholder="123-456-7890" required>
            </div>
          </div>
          <h4 class="mb-3">Payment Information</h4>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="cardname">Name on Card</label>
              <input type="text" class="form-control" id="cardname" name="cardname" placeholder="John More Doe" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="cardnumber">Credit Card Number</label>
              <input type="text" class="form-control" id="cardnumber" name="cardnumber" placeholder="1111-2222-3333-4444" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="expmonth">Exp Month</label>
              <input type="text" class="form-control" id="expmonth" name="expmonth" placeholder="MM" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="expyear">Exp Year</label>
              <input type="text" class="form-control" id="expyear" name="expyear" placeholder="YYYY" required>
            </div>
            <div class="col-md-4 mb-3">
              <label for="cvv">CVV</label>
              <input type="text" class="form-control" id="cvv" name="cvv" placeholder="352" required>
            </div>
          </div>
          <button type="submit" class="btn btn-primary">Place Order</button>
        </form>
      </div>
      <div class="col-md-4">
        <h4 class="mb-3">Your Cart</h4>
        <ul id="cartItems" class="list-group mb-3"></ul>
        <div class="d-flex justify-content-between">
          <span><strong>Subtotal</strong></span>
          <span id="subtotal">$0.00</span>
        </div>
        <div class="d-flex justify-content-between">
          <span><strong>Shipping</strong></span>
          <span id="shipping">$0.00</span>
        </div>
        <div class="d-flex justify-content-between">
          <span><strong>Tax</strong></span>
          <span id="tax">$0.00</span>
        </div>
        <div class="d-flex justify-content-between">
          <span><strong>Total</strong></span>
          <span id="total">$0.00</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-light py-4 mt-5">
    <div class="container text-center">
      <p>&copy; 2025 My Dummy Shop. All rights reserved.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Handle login/logout toggle
    document.addEventListener('DOMContentLoaded', () => {
        const cookies = document.cookie.split('; ').reduce((acc, val) => {
        const [key, value] = val.split('=');
        acc[key] = value;
        return acc;
      }, {});

      const isLoggedIn = cookies['loggedIn'] === 'true';
      if (!isLoggedIn) {
        window.location.href = 'login.html';
        return;
      }
        
    //   const isLoggedIn = document.cookie.split('; ').includes('loggedIn=true');
      document.getElementById('nav-login').classList.toggle('d-none', isLoggedIn);
      document.getElementById('nav-logout').classList.toggle('d-none', !isLoggedIn);
    });
    
    
    function getCart() {
      const cartCookie = document.cookie.split('; ').find(row => row.startsWith('cart='));
      return cartCookie ? JSON.parse(decodeURIComponent(cartCookie.split('=')[1])) : [];
    }

    function setCart(cart) {
      document.cookie = `cart=${encodeURIComponent(JSON.stringify(cart))}; path=/`;
    }

    function removeFromCart(index) {
      const cart = getCart();
      cart.splice(index, 1);
      setCart(cart);
      renderCart();
    }
    
    // Sample cart data
    const products = [
      { id: 1, name: "Red Widget", price: 19.99, img: "https://via.placeholder.com/300x200/ff4d4d/ffffff?text=Red+Widget" },
      { id: 2, name: "Blue Widget", price: 24.99, img: "https://via.placeholder.com/300x200/4d79ff/ffffff?text=Blue+Widget" },
      { id: 3, name: "Green Widget", price: 29.99, img: "https://via.placeholder.com/300x200/4dff88/000000?text=Green+Widget" },
      { id: 4, name: "Yellow Widget", price: 22.50, img: "https://via.placeholder.com/300x200/ffff4d/000000?text=Yellow+Widget" },
      { id: 5, name: "Black Widget", price: 39.99, img: "https://via.placeholder.com/300x200/333333/ffffff?text=Black+Widget" },
      { id: 6, name: "White Widget", price: 17.75, img: "https://via.placeholder.com/300x200/ffffff/000000?text=White+Widget" },
      { id: 7, name: "Orange Widget", price: 21.99, img: "https://via.placeholder.com/300x200/ffa64d/000000?text=Orange+Widget" },
      { id: 8, name: "Purple Widget", price: 34.95, img: "https://via.placeholder.com/300x200/b266ff/ffffff?text=Purple+Widget" },
      { id: 9, name: "Teal Widget", price: 28.49, img: "https://via.placeholder.com/300x200/4dcccc/000000?text=Teal+Widget" },
      { id: 10, name: "Gray Widget", price: 23.89, img: "https://via.placeholder.com/300x200/c0c0c0/000000?text=Gray+Widget" }
    ];

    const cart = getCart();

    const filteredCart = cart.map(id => {
        const product = products.find(p => p.id === id);
        return product ? { ...product, quantity: 1 } : null;
    }).filter(item => item !== null);

    // Function to update the cart display
    function updateCart() {
      const cartItemsContainer = document.getElementById('cartItems');
      const subtotalElement = document.getElementById('subtotal');
      const shippingElement = document.getElementById('shipping');
      const taxElement = document.getElementById('tax');
      const totalElement = document.getElementById('total');

      let subtotal = 0;
      cartItemsContainer.innerHTML = '';

      filteredCart.forEach(item => {
        const li = document.createElement('li');
        li.classList.add('list-group-item', 'd-flex', 'justify-content-between');
        li.innerHTML = `
          <span>${item.name} (x 1)</span>
          <span>$${(item.price * 1).toFixed(2)}</span>
        `;
        cartItemsContainer.appendChild(li);
        subtotal += item.price * 1;
      });

      const shipping = 5.00; // Flat shipping rate
      const tax = subtotal * 0.10; // 10% tax

      subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
      shippingElement.textContent = `$${shipping.toFixed(2)}`;
      taxElement.textContent = `$${tax.toFixed(2)}`;
      totalElement.textContent = `$${(subtotal + shipping + tax).toFixed(2)}`;
    }

    // Initialize the cart display
    updateCart();
  </script>

  <script>
    // Function to set a cookie
    function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = "expires=" + date.toUTCString();
        document.cookie = name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/";
    }

    // Function to get a cookie value
    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return decodeURIComponent(c.substring(nameEQ.length, c.length));
        }
        return null;
    }

    // Function to handle form submission and store data in cookies
    function handleCheckoutFormSubmit(event) {
        event.preventDefault();

        const name = document.getElementById('fullname').value;
        const email = document.getElementById('email').value;
        const address = document.getElementById('address').value;
        const phone = document.getElementById('phone').value;

        // Store form data in cookies
        setCookie('checkoutName', name, 30);
        setCookie('checkoutEmail', email, 30);
        setCookie('checkoutAddress', address, 30);
        setCookie('checkoutPhone', phone, 30);

        // Redirect to thank you page
        window.location.href = 'thank-you.html';
    }

    // Attach event listener to form
    document.getElementById('checkoutForm').addEventListener('submit', handleCheckoutFormSubmit);
    </script>

</body>
</html>

 
