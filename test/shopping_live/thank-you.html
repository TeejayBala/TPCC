<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thank You - Order Confirmation</title>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MWC9P9T4');</script>
<!-- End Google Tag Manager -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    body {
      padding-top: 70px;
    }
    .product-img {
      width: 100px;
      height: 70px;
      object-fit: cover;
    }
  </style>
  <script src="https://cdn-in.pagesense.io/js/1rtdxsnn/2310c4daad0644f69327deca7888b4a1.js"></script>
<script src="common.js"></script>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="index.html"><i class="fas fa-store"></i> My Dummy Shop</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <li class="nav-item"><a class="nav-link" href="products.html"><i class="fas fa-box"></i> Products</a></li>
          <li class="nav-item"><a class="nav-link" href="cart.html"><i class="fas fa-shopping-cart"></i> Cart</a></li>
          <li class="nav-item"><a class="nav-link active" href="checkout.html"><i class="fas fa-credit-card"></i> Checkout</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html"><i class="fas fa-info-circle"></i> About</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
        </ul>
        <ul class="navbar-nav ms-auto">
          <li class="nav-item" id="nav-login"><a class="nav-link" href="login.html"><i class="fas fa-sign-in-alt"></i> Login</a></li>
          <li class="nav-item d-none" id="nav-logout"><a class="nav-link" href="logout.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Order Confirmation Section -->
  <div class="container mt-5">
    <h2 class="mb-4">Thank You for Your Order!</h2>
    <p class="lead">Your order has been successfully placed. Below are your order details:</p>

    <div class="row">
      <div class="col-md-8">
        <h4 class="mb-3">Order Summary</h4>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Product</th>
              <th>Quantity</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody id="orderItems">
            <!-- Order items will be dynamically inserted here -->
          </tbody>
        </table>
        <div class="d-flex justify-content-between">
          <span><strong>Subtotal</strong></span>
          <span id="orderSubtotal">$0.00</span>
        </div>
        <div class="d-flex justify-content-between">
          <span><strong>Shipping</strong></span>
          <span id="orderShipping">$0.00</span>
        </div>
        <div class="d-flex justify-content-between">
          <span><strong>Tax</strong></span>
          <span id="orderTax">$0.00</span>
        </div>
        <div class="d-flex justify-content-between">
          <span><strong>Total</strong></span>
          <span id="orderTotal">$0.00</span>
        </div>
      </div>

      <div class="col-md-4">
        <h4 class="mb-3">Shipping Information</h4>
        <p><strong>Name:</strong> <span id="shippingName"></span></p>
        <p><strong>Email:</strong> <span id="shippingEmail"></span></p>
        <p><strong>Address:</strong> <span id="shippingAddress"></span></p>
        <p><strong>Phone:</strong> <span id="shippingPhone"></span></p>
      </div>
    </div>

    <div class="text-center mt-4">
      <a href="index.html" class="btn btn-primary">Continue Shopping</a>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-light py-4 mt-5">
    <div class="container text-center">
      <p>&copy; 2025 My Dummy Shop. All rights reserved.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Handle login/logout toggle
    document.addEventListener('DOMContentLoaded', () => {
        const cookies = document.cookie.split('; ').reduce((acc, val) => {
        const [key, value] = val.split('=');
        acc[key] = value;
        return acc;
      }, {});

      const isLoggedIn = cookies['loggedIn'] === 'true';
      if (!isLoggedIn) {
        window.location.href = 'login.html';
        return;
      }
        
    //   const isLoggedIn = document.cookie.split('; ').includes('loggedIn=true');
      document.getElementById('nav-login').classList.toggle('d-none', isLoggedIn);
      document.getElementById('nav-logout').classList.toggle('d-none', !isLoggedIn);
    });
    
    // Function to get a cookie value by name
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
      return null;
    }

    function getCart() {
      const cartCookie = document.cookie.split('; ').find(row => row.startsWith('cart='));
      return cartCookie ? JSON.parse(decodeURIComponent(cartCookie.split('=')[1])) : [];
    }

    function setCart(cart) {
      document.cookie = `cart=${encodeURIComponent(JSON.stringify(cart))}; path=/`;
    }

    function removeFromCart(index) {
      const cart = getCart();
      cart.splice(index, 1);
      setCart(cart);
      renderCart();
    }
    
    // Sample cart data
    const products = [
      { id: 1, name: "Red Widget", price: 19.99, img: "https://via.placeholder.com/300x200/ff4d4d/ffffff?text=Red+Widget" },
      { id: 2, name: "Blue Widget", price: 24.99, img: "https://via.placeholder.com/300x200/4d79ff/ffffff?text=Blue+Widget" },
      { id: 3, name: "Green Widget", price: 29.99, img: "https://via.placeholder.com/300x200/4dff88/000000?text=Green+Widget" },
      { id: 4, name: "Yellow Widget", price: 22.50, img: "https://via.placeholder.com/300x200/ffff4d/000000?text=Yellow+Widget" },
      { id: 5, name: "Black Widget", price: 39.99, img: "https://via.placeholder.com/300x200/333333/ffffff?text=Black+Widget" },
      { id: 6, name: "White Widget", price: 17.75, img: "https://via.placeholder.com/300x200/ffffff/000000?text=White+Widget" },
      { id: 7, name: "Orange Widget", price: 21.99, img: "https://via.placeholder.com/300x200/ffa64d/000000?text=Orange+Widget" },
      { id: 8, name: "Purple Widget", price: 34.95, img: "https://via.placeholder.com/300x200/b266ff/ffffff?text=Purple+Widget" },
      { id: 9, name: "Teal Widget", price: 28.49, img: "https://via.placeholder.com/300x200/4dcccc/000000?text=Teal+Widget" },
      { id: 10, name: "Gray Widget", price: 23.89, img: "https://via.placeholder.com/300x200/c0c0c0/000000?text=Gray+Widget" }
    ];

    const cart = getCart();

    const filteredCart = cart.map(id => {
        const product = products.find(p => p.id === id);
        return product ? { ...product, quantity: 1 } : null;
    }).filter(item => item !== null);
    
    // Sample order data
    const order = {
      items: filteredCart,
      shipping: {
        name: getCookie('checkoutName'),
        email: getCookie('checkoutEmail'),
        address: getCookie('checkoutAddress'),
        phone: getCookie('checkoutPhone')
      }
    };

    // Function to update the order details on the page
    function updateOrderDetails() {
      const orderItemsContainer = document.getElementById('orderItems');
      const orderSubtotalElement = document.getElementById('orderSubtotal');
      const orderShippingElement = document.getElementById('orderShipping');
      const orderTaxElement = document.getElementById('orderTax');
      const orderTotalElement = document.getElementById('orderTotal');
      const shippingNameElement = document.getElementById('shippingName');
      const shippingEmailElement = document.getElementById('shippingEmail');
      const shippingAddressElement = document.getElementById('shippingAddress');
      const shippingPhoneElement = document.getElementById('shippingPhone');

      // Display shipping information
      shippingNameElement.textContent = order.shipping.name;
      shippingEmailElement.textContent = order.shipping.email;
      shippingAddressElement.textContent = order.shipping.address;
      shippingPhoneElement.textContent = order.shipping.phone;

      // Calculate order totals
      let subtotal = 0;
      order.items.forEach(item => {
        subtotal += item.quantity * item.price;
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${item.name}</td>
          <td>${item.quantity}</td>
          <td>$${item.price.toFixed(2)}</td>
          <td>$${(item.quantity * item.price).toFixed(2)}</td>
        `;
        orderItemsContainer.appendChild(row);
      });

      const shippingCost = 5.00; // Flat shipping fee
      const taxRate = 0.08; // 8% tax rate
      const tax = subtotal * taxRate;
      const total = subtotal + shippingCost + tax;

      // Update totals on the page
      orderSubtotalElement.textContent = `$${subtotal.toFixed(2)}`;
      orderShippingElement.textContent = `$${shippingCost.toFixed(2)}`;
      orderTaxElement.textContent = `$${tax.toFixed(2)}`;
      orderTotalElement.textContent = `$${total.toFixed(2)}`;
    }

    // Call the function to update order details
    updateOrderDetails();
  </script>
</body>
</html>